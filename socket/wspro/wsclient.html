 <!DOCTYPE html>
<html>
<head>
</head>
    <meta charset="UTF-8">
    <style>
        #msg{
            width:600px; height:600px; overflow:auto; border:2px solid #000000;
             position: fixed; bottom:0;
    }
    </style>
</head>
<body>
    <p>
        <p id="ptailf">实时查看日志</p>
        <p id="noptailf">非实时查看日志</p>
    </p>
    <div id="msg"></div>
    <script src="http://libs.baidu.com/jquery/1.9.1/jquery.min.js"></script>

    <script>
//    $(document).ready(function() {
//        /* !window.WebSocket、window.MozWebSocket检测浏览器对websocket的支持*/
//        if (!window.WebSocket) {
//            if (window.MozWebSocket) {
//                window.WebSocket = window.MozWebSocket;
//            } else {
//                $('#msg').prepend("<p>你的浏览器不支持websocket</p>");
//            }
//        }
//        /* ws = new WebSocket 创建WebSocket的实例  注意设置对以下的websocket的地址哦*/
//        ws = new WebSocket('ws://192.168.2.11:8000/websocket/');
//        /*
//            ws.onopen  握手完成并创建TCP/IP通道，当浏览器和WebSocketServer连接成功后，会触发onopen消息
//            ws.onmessage 接收到WebSocketServer发送过来的数据时，就会触发onmessage消息，参数evt中包含server传输过来的数据;
//        */
//        ws.onopen = function(evt) {
//            $('#msg').prepend('<li>websocket连接成功</li>');
//        };
//        ws.onmessage = function(evt) {
//            $('#msg').append('<li>' + evt.data + '</li>');
//        };
//    });



    $('#ptailf').click(function () {
        console.log('before.....')
        /* ws = new WebSocket 创建WebSocket的实例  注意设置对以下的websocket的地址哦*/
        ws = new WebSocket('ws://192.168.2.11:8000/websocket/');
        /*
            ws.onopen  握手完成并创建TCP/IP通道，当浏览器和WebSocketServer连接成功后，会触发onopen消息
            ws.onmessage 接收到WebSocketServer发送过来的数据时，就会触发onmessage消息，参数evt中包含server传输过来的数据;
        */


        ws.onopen = function(evt) {
            $('#msg').prepend('<li>websocket连接成功</li>');
        };
        ws.onmessage = function(evt) {
            $('#msg').append('<li>' + evt.data + '</li>');
        };
        console.log('after.....')
    });

    $('#noptailf').click(function () {

        ws.onclose = function(evt) {
            console.log(evt);
        };
    });

        //（服务端）连接断开时触发
//       ws.onclose = function(e){
//            $('#msg').innerHTML = 'offline';
//            $('#msg').style.color = 'red';
//       };
//
//       //关闭页面时记得一定要关闭连接，否则服务端可能不会释放
//       window.onunload = function(){
//           ws.close();
//       };

</script>


</body>
</html>
